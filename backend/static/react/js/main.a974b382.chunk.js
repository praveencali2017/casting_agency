(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{14:function(e,t,c){},28:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),n=c(7),i=c.n(n),l=(c(14),c(6)),o=c.n(l),d=c(8),r=c(2),j="".concat(window.location.origin,"/"),m=j+"v1/movies",u=j+"v1/actors",b=j+"v1/movies_cast",h=function(e,t,c,a,s){fetch(e,{method:t,body:c?JSON.stringify(c):null,headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(s)})}).then((function(e){return e.json()})).then((function(e){a&&a(e)})).catch((function(e){alert(e)}))};var v=function(e){var t=Object(s.useState)([]),c=Object(r.a)(t,2),n=c[0],i=c[1];Object(s.useEffect)((function(e){l()}),[]),Object(s.useEffect)((function(e){l()}),[e.appToken]),Object(s.useEffect)((function(t){e.loadActors&&l()}),[e.loadActors]);var l=function(){var t,c;e.appToken&&(t=function(t){i(t),e.loadActorsList(t)},c=e.appToken,h(u,"GET",null,(function(e){e&&e.success&&t(e.data)}),c))};return Object(a.jsx)("div",{className:"row",children:n.map((function(t){return Object(a.jsx)("div",{className:"col",style:{padding:3,marginLeft:2},children:Object(a.jsx)("div",{className:"card",style:{width:300},children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h5",{className:"card-title",style:{color:"black"},children:t.name}),Object(a.jsxs)("p",{style:{color:"black"},children:["Age: ",t.age]}),Object(a.jsxs)("p",{style:{color:"black"},children:["Gender: ",t.gender]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("div",{className:"btn-success btn-sm text-center",id:"actorUpdateBtnContainer"+t.id,"data-toggle":"modal","data-target":"#updateActorModal",style:{cursor:"pointer"},onClick:function(c){return e.chooseUpdate(t)},children:"Update"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("div",{className:"btn-danger btn-sm text-center",id:"deleteActor_"+t.id,style:{cursor:"pointer"},onClick:function(c){return function(t){window.confirm("Are you sure you want to delete the actor ".concat(t.name," ?"))&&h(u+"/"+t.id,"DELETE",null,(function(t){t.success&&(e.isActorDeleted(),l())}))}(t)},children:"Delete"})})]})]})})})}))})},p=c(3);var O=function(e){var t=Object(s.useState)([]),c=Object(r.a)(t,2),n=c[0],i=c[1];Object(s.useEffect)((function(e){l()}),[]),Object(s.useEffect)((function(e){l()}),[e.appToken]),Object(s.useEffect)((function(t){e.loadMovies&&l()}),[e.loadMovies]);var l=function(){var t,c;e.appToken&&(t=function(t){i(t),e.loadMoviesList(t)},c=e.appToken,h(m,"GET",null,(function(e){e&&e.success&&t(e.data)}),c))};return Object(a.jsx)("div",{className:"row",children:n.map((function(t){return Object(a.jsx)("div",{className:"col",style:{padding:3,marginLeft:2},children:Object(a.jsx)("div",{className:"card bg-light mb-3",style:{width:300},children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h5",{className:"card-title",style:{color:"black"},children:t.title}),Object(a.jsxs)("p",{children:["Releases on: ",new Date(t.release_date.replace("GMT","")).toDateString()]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("div",{className:"btn-success btn-sm text-center",id:"movie-id-btn-"+t.id,"data-toggle":"modal","data-target":"#updateMovieModal",style:{cursor:"pointer"},onClick:function(c){return e.chooseUpdate(t)},children:"Update"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("div",{className:"btn-danger btn-sm text-center",id:"deleteMovie_"+t.id,style:{cursor:"pointer"},onClick:function(c){return function(t){window.confirm("Are you sure you want to delete the movie ".concat(t.title," ?"))&&h(m+"/"+t.id,"DELETE",null,(function(t){t.success&&(e.isMovieDeleted(),l())}))}(t)},children:"Delete"})})]})]})})})}))})};var x=function(e){var t=Object(s.useState)([]),c=Object(r.a)(t,2),n=c[0],i=c[1];Object(s.useEffect)((function(e){l()}),[]),Object(s.useEffect)((function(t){e.isUpdated&&l()}),[e.isUpdated]);var l=function(){var t;t=function(t){t.success&&(i(t.data),e.disableIsUpdated())},fetch(b).then((function(e){return e.json()})).then((function(e){t(e)}))};return Object(a.jsx)("div",{className:"row",children:n.map((function(e){return Object(a.jsx)("div",{className:"col",style:{padding:3,marginLeft:2},children:Object(a.jsx)("div",{className:"card",style:{width:300},children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h5",{className:"card-title",style:{color:"black"},children:e.movie.title+"'s Actors"}),Object(a.jsxs)("p",{children:["Movie Title: ",e.movie.title]}),Object(a.jsx)("label",{children:"Actors:"}),e.actors.map((function(t){return Object(a.jsxs)("button",{class:"btn btn-primary btn-sm",style:{margin:2},children:[t.name," ",Object(a.jsx)("span",{class:"badge badge-light",onClick:function(c){return function(e,t){window.confirm("This action will remove ".concat(t.name," from the movie ").concat(e.title," ?"))&&h(b+"?actor_id=".concat(t.id,"&movie_id=").concat(e.id),"DELETE",null,(function(e){e.success&&l()}))}(e.movie,t)},children:"\xd7"})]})}))]})})})}))})};var f=function(){var e=Object(p.b)(),t=e.isAuthenticated,c=e.loginWithRedirect,s=e.logout,n=e.user;return Object(a.jsxs)("div",{children:[t&&Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col",children:["Hello ",n.name]})}),Object(a.jsx)("div",{className:"row",children:t?Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)("div",{className:"btn-danger btn-sm",onClick:function(){return s()},children:"Logout"})}):Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)("div",{className:"btn-success btn-sm",onClick:function(){return c()},children:"Login"})})})]})};var g=function(e){var t=Object(s.useState)(!1),c=Object(r.a)(t,2),n=c[0],i=c[1],l=Object(s.useState)(!1),j=Object(r.a)(l,2),g=j[0],N=j[1],y=Object(s.useState)(!1),T=Object(r.a)(y,2),k=T[0],M=T[1],A=Object(s.useState)([]),w=Object(r.a)(A,2),C=w[0],E=w[1],D=Object(s.useState)([]),S=Object(r.a)(D,2),B=S[0],L=S[1],I=Object(s.useState)({}),U=Object(r.a)(I,2),_=U[0],R=U[1],V=Object(s.useState)({}),G=Object(r.a)(V,2),P=G[0],F=G[1],H=Object(s.useState)(null),J=Object(r.a)(H,2),q=J[0],z=J[1],W=Object(p.b)(),Y=W.getAccessTokenSilently,K=W.loginWithRedirect;Object(s.useEffect)((function(e){Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,console.log("Getting token!!!!"),e.next=5,Y({audience:"casting",scope:"get:actors get:movies"});case 5:t=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),"login_required"===e.t0.error&&K(),"consent_required"===e.t0.error&&K();case 12:z(t);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[]);var Q=function(){!function(e,t){fetch(m,{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){t(e)}))}({title:document.getElementById("movieTitleTxt").value,release_date:document.getElementById("movieReleaseDateVal").value},(function(e){e&&e.success&&i(!0),document.getElementById("dismissMovieModalBtn").click()}))},X=function(){!function(e,t){fetch(u,{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){t(e)}))}({name:document.getElementById("actorNameTxt").value,age:document.getElementById("actorAgeTxt").value,gender:document.querySelector("input[name = gender]:checked").value},(function(e){e&&e.success&&N(!0),document.getElementById("dismissActorModalBtn").click()}))},Z=function(){var e=_.id,t=document.querySelector("input[name='updateActorGender']:checked").value,c=document.getElementById("updateActorTitleText").value,a=document.getElementById("updateActorAgeVal").value;R({id:e,gender:t,name:c,age:a})},$=function(){var e=P.id,t=document.getElementById("updateMovieTitleText").value,c=document.getElementById("updateMovieReleaseDateVal").value;F({id:e,title:t,release_date:c})},ee=function(e){document.getElementById("updateActorModalDismiss").click(),h(u+"/"+e,"PATCH",_,(function(e){e.success&&N(!0)}))},te=function(e){document.getElementById("updateMovieModalDismiss").click(),h(m+"/"+e,"PATCH",P,(function(e){e.success&&i(!0)}))};return Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col",children:[Object(a.jsxs)("div",{className:"nav nav-tabs",id:"dashboardTab",role:"tablist",children:[Object(a.jsx)("a",{className:"nav-item nav-link active","data-toggle":"tab",href:"#loginLogout",role:"tab",children:"Login/Logout"}),Object(a.jsx)("a",{className:"nav-item nav-link","data-toggle":"tab",href:"#viewContent",role:"tab",children:"View/Edit"}),Object(a.jsx)("a",{className:"nav-item nav-link","data-toggle":"tab",href:"#manageCastContent",role:"tab",children:"Manage Cast"})]}),Object(a.jsxs)("div",{className:"tab-content",id:"tabDashboardContent",children:[Object(a.jsx)("div",{className:"tab-pane fade show active",id:"loginLogout",role:"tabpanel",children:Object(a.jsx)(f,{})}),Object(a.jsx)("div",{className:"tab-pane fade",id:"viewContent",role:"tabpanel",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("h3",{children:"Movies"}),Object(a.jsx)("div",{className:"btn-primary btn-lg",id:"createMovieBtn","data-toggle":"modal","data-target":"#addMovieModal",children:"Create Movie"}),Object(a.jsx)("div",{className:"modal fade",id:"addMovieModal",role:"dialog",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"addMovieModalTitle",children:"Add New Movie"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(a.jsx)("span",{children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"movieTitleTxt",children:"Title:"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"movieTitleTxt"})]}),Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"movieReleaseDateVal",children:"Release Date:"}),Object(a.jsx)("input",{type:"date",className:"form-control",id:"movieReleaseDateVal"})]})]}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(e){Q()},children:"Add"}),Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",id:"dismissMovieModalBtn",children:"Close"})]})]})})}),Object(a.jsx)("div",{className:"container",style:{marginLeft:15,marginTop:10},children:Object(a.jsx)(O,{loadMovies:n,appToken:q,isMovieDeleted:function(e){M(!0)},loadMoviesList:function(e){E(e),i(!1)},chooseUpdate:F})}),function(){var e=P.release_date?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";e=e.replace("GMT","");var c=new Date(e+" "),a=c.getMonth()+1<10?"0"+(c.getMonth()+1):c.getMonth()+1;return"".concat(c.getFullYear()).concat(t).concat(a).concat(t).concat(c.getDate())}(P.release_date):"";return Object(a.jsx)("div",{className:"modal fade",id:"updateMovieModal",role:"dialog",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",children:"Update Movie"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",id:"updateMovieModalDismiss",children:Object(a.jsx)("span",{children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"updateMovieTitleText",children:"Title:"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"updateMovieTitleText",value:P.title,onChange:$})]}),Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"updateMovieReleaseDateVal",children:"Release Date:"}),Object(a.jsx)("input",{type:"date",className:"form-control",id:"updateMovieReleaseDateVal",value:e,onChange:$})]})]}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("button",{type:"button",style:{marginLeft:"auto",marginRight:"auto"},className:"btn btn-primary",onClick:function(e){te(P.id)},children:"Update"})})]})})})}()]}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("h3",{children:"Actors"}),Object(a.jsx)("div",{className:"btn-primary btn-lg",id:"createActorBtn","data-toggle":"modal","data-target":"#addActorModal",children:"Create Actor"}),Object(a.jsx)("div",{className:"modal fade",id:"addActorModal",role:"dialog",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"addActorModalTitle",children:"Add Actor"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(a.jsx)("span",{children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"actorNameTxt",children:"Name:"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"actorNameTxt"})]}),Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"actorAgeTxt",children:"Age:"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"actorAgeTxt"})]}),Object(a.jsx)("div",{className:"form-check-inline",children:Object(a.jsxs)("label",{className:"form-check-label",children:[Object(a.jsx)("input",{type:"radio",className:"form-check-input",name:"gender",value:"male"}),"Male"]})}),Object(a.jsx)("div",{class:"form-check-inline",children:Object(a.jsxs)("label",{className:"form-check-label",children:[Object(a.jsx)("input",{type:"radio",className:"form-check-input",name:"gender",value:"female"}),"Female"]})})]}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(e){X()},children:"Add"}),Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",id:"dismissActorModalBtn",children:"Close"})]})]})})}),Object(a.jsx)("div",{className:"container",style:{marginLeft:15,marginTop:10},children:Object(a.jsx)(v,{appToken:q,loadActors:g,isActorDeleted:function(e){M(!0)},loadActorsList:function(e){L(e),N(!1)},chooseUpdate:R})}),Object(a.jsx)("div",{className:"modal fade",id:"updateActorModal",role:"dialog",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"updateActorModalTitle",children:"Update Actor"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",id:"updateActorModalDismiss",children:Object(a.jsx)("span",{children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"updateActorTitleText",children:"Name:"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"updateActorTitleText",value:_.name,onChange:Z})]}),Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{className:"input-group",for:"updateActorAgeVal",children:"Age:"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"updateActorAgeVal",value:_.age,onChange:Z})]}),Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("div",{className:"form-check-inline",children:Object(a.jsxs)("label",{className:"form-check-label",children:[Object(a.jsx)("input",{type:"radio",className:"form-check-input",name:"updateActorGender",value:"male",checked:"male"===_.gender&&"checked",onChange:Z}),"Male"]})}),Object(a.jsx)("div",{class:"form-check-inline",children:Object(a.jsxs)("label",{className:"form-check-label",children:[Object(a.jsx)("input",{type:"radio",className:"form-check-input",name:"updateActorGender",value:"female",checked:"female"===_.gender&&"checked",onChange:Z}),"Female"]})})]})]}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("button",{type:"button",style:{marginLeft:"auto",marginRight:"auto"},className:"btn btn-primary",onClick:function(e){ee(_.id)},children:"Update"})})]})})})]})]})}),Object(a.jsx)("div",{className:"tab-pane fade",id:"manageCastContent",role:"tabpanel",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col",children:[Object(a.jsxs)("div",{className:"row",style:{marginTop:20},children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("select",{className:"custom-select",id:"selectedMovie",children:[Object(a.jsx)("option",{disabled:!0,selected:!0,children:"Select Movie"}),C.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.title})}))]})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("select",{className:"custom-select",id:"selectedActor",children:[Object(a.jsx)("option",{disabled:!0,selected:!0,children:"Select Actor"}),B.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name})}))]})})]}),Object(a.jsx)("div",{className:"row",style:{marginTop:10},children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("div",{className:"btn btn-success btn-lg btn-block",onClick:function(){var e,t,c;e=b,t={movie_id:document.getElementById("selectedMovie").value,actor_id:document.getElementById("selectedActor").value},c=function(e){e.success&&M(!0)},fetch(e,{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){alert(e)}))},children:"Cast to the movie"})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(x,{appToken:q,isUpdated:k,disableIsUpdated:function(){return M(!1)}})})})]})})})]})]})})};var N=function(){return Object(a.jsxs)("div",{className:"App container-fluid",children:[Object(a.jsxs)("div",{className:"jumbotron",children:[Object(a.jsx)("h1",{children:"Casting Agency"}),Object(a.jsx)("p",{children:"Single place to view movies, actors and assign actors to the movies!!!!!"})]}),Object(a.jsx)(g,{})]})},y=(c(23),c(24),c(25),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,29)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))});i.a.render(Object(a.jsx)(p.a,{domain:"dev-prav-auth.us.auth0.com",clientId:"DavU4i56mMk4qPck3ruSla263xEczzJ5",redirectUri:window.location.origin,audience:"casting",scope:"get:actors get:movies",children:Object(a.jsx)(N,{})}),document.getElementById("root")),y()}},[[28,1,2]]]);
//# sourceMappingURL=main.a974b382.chunk.js.map